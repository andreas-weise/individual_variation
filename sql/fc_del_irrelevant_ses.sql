-- analysis uses only a small subset of sessions from the fisher corpus; 
-- delete all data not relating to those relevant sessions

DELETE
FROM   chunks
WHERE  chu_id IN (
    SELECT chu.chu_id
    FROM   chunks chu
    JOIN   turns tur
    ON     chu.tur_id == tur.tur_id
    WHERE  tur.tsk_id NOT IN (
        75, 84, 108, 205, 273, 314, 401, 423, 429, 430, 440, 459, 464, 465, 615,
        704, 752, 803, 835, 879, 1008, 1193, 1216, 1231, 1249, 1257, 1296, 1670, 
        1716, 2655, 2779, 2892, 3202, 3262, 3336, 3353, 3430, 3465, 4006, 4047, 
        4169, 4170, 4312, 4331, 4720, 4730, 4743, 4778, 4940, 5048, 5057, 5068, 
        5213, 5283, 5454, 5473, 5647, 5686, 5950, 6271, 6342, 6530, 6767, 6912, 
        6992, 7071, 7098, 7101, 7252, 7317, 7346, 7395, 7438, 7495, 7711, 8170, 
        8239, 8328, 8398, 8406, 8585, 8659, 8739, 8813, 8893, 8923, 8972, 9360, 
        9366, 9432, 9847, 10001, 10337, 10525, 10552, 10612, 10758, 10772, 
        10820, 10906, 11045, 11229, 11261, 11277, 11292
    )
);

DELETE
FROM   turns
WHERE  tsk_id NOT IN (
    75, 84, 108, 205, 273, 314, 401, 423, 429, 430, 440, 459, 464, 465, 615,
    704, 752, 803, 835, 879, 1008, 1193, 1216, 1231, 1249, 1257, 1296, 1670, 
    1716, 2655, 2779, 2892, 3202, 3262, 3336, 3353, 3430, 3465, 4006, 4047, 
    4169, 4170, 4312, 4331, 4720, 4730, 4743, 4778, 4940, 5048, 5057, 5068, 
    5213, 5283, 5454, 5473, 5647, 5686, 5950, 6271, 6342, 6530, 6767, 6912, 
    6992, 7071, 7098, 7101, 7252, 7317, 7346, 7395, 7438, 7495, 7711, 8170, 
    8239, 8328, 8398, 8406, 8585, 8659, 8739, 8813, 8893, 8923, 8972, 9360, 
    9366, 9432, 9847, 10001, 10337, 10525, 10552, 10612, 10758, 10772, 
    10820, 10906, 11045, 11229, 11261, 11277, 11292
);

DELETE
FROM   tasks
WHERE  tsk_id NOT IN (
    75, 84, 108, 205, 273, 314, 401, 423, 429, 430, 440, 459, 464, 465, 615,
    704, 752, 803, 835, 879, 1008, 1193, 1216, 1231, 1249, 1257, 1296, 1670, 
    1716, 2655, 2779, 2892, 3202, 3262, 3336, 3353, 3430, 3465, 4006, 4047, 
    4169, 4170, 4312, 4331, 4720, 4730, 4743, 4778, 4940, 5048, 5057, 5068, 
    5213, 5283, 5454, 5473, 5647, 5686, 5950, 6271, 6342, 6530, 6767, 6912, 
    6992, 7071, 7098, 7101, 7252, 7317, 7346, 7395, 7438, 7495, 7711, 8170, 
    8239, 8328, 8398, 8406, 8585, 8659, 8739, 8813, 8893, 8923, 8972, 9360, 
    9366, 9432, 9847, 10001, 10337, 10525, 10552, 10612, 10758, 10772, 
    10820, 10906, 11045, 11229, 11261, 11277, 11292
);

DELETE
FROM   sessions
WHERE  ses_id NOT IN (
    75, 84, 108, 205, 273, 314, 401, 423, 429, 430, 440, 459, 464, 465, 615,
    704, 752, 803, 835, 879, 1008, 1193, 1216, 1231, 1249, 1257, 1296, 1670, 
    1716, 2655, 2779, 2892, 3202, 3262, 3336, 3353, 3430, 3465, 4006, 4047, 
    4169, 4170, 4312, 4331, 4720, 4730, 4743, 4778, 4940, 5048, 5057, 5068, 
    5213, 5283, 5454, 5473, 5647, 5686, 5950, 6271, 6342, 6530, 6767, 6912, 
    6992, 7071, 7098, 7101, 7252, 7317, 7346, 7395, 7438, 7495, 7711, 8170, 
    8239, 8328, 8398, 8406, 8585, 8659, 8739, 8813, 8893, 8923, 8972, 9360, 
    9366, 9432, 9847, 10001, 10337, 10525, 10552, 10612, 10758, 10772, 
    10820, 10906, 11045, 11229, 11261, 11277, 11292
);

DELETE
FROM   speakers
WHERE  spk_id NOT IN (
    SELECT DISTINCT(spk_id_a)
    FROM   sessions

    UNION

    SELECT DISTINCT(spk_id_b)
    FROM   sessions
);

DELETE
FROM   topics
WHERE  top_id NOT IN (
    SELECT DISTINCT(top_id)
    FROM   sessions
);


